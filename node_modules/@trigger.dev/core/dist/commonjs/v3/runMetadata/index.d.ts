import { DeserializedJson } from "../../schemas/json.js";
import { AsyncIterableStream } from "../apiClient/stream.js";
import { ApiRequestOptions } from "../zodfetch.js";
import { RunMetadataManager, RunMetadataUpdater } from "./types.js";
export declare class RunMetadataAPI implements RunMetadataManager {
    #private;
    private static _instance?;
    private constructor();
    static getInstance(): RunMetadataAPI;
    setGlobalManager(manager: RunMetadataManager): boolean;
    enterWithMetadata(metadata: Record<string, DeserializedJson>): void;
    current(): Record<string, DeserializedJson> | undefined;
    getKey(key: string): DeserializedJson | undefined;
    set(key: string, value: DeserializedJson): this;
    del(key: string): this;
    increment(key: string, value: number): this;
    decrement(key: string, value: number): this;
    append(key: string, value: DeserializedJson): this;
    remove(key: string, value: DeserializedJson): this;
    update(metadata: Record<string, DeserializedJson>): this;
    stream<T>(key: string, value: AsyncIterable<T> | ReadableStream<T>, signal?: AbortSignal): Promise<AsyncIterable<T>>;
    fetchStream<T>(key: string, signal?: AbortSignal): Promise<AsyncIterableStream<T>>;
    flush(requestOptions?: ApiRequestOptions): Promise<void>;
    refresh(requestOptions?: ApiRequestOptions): Promise<void>;
    get parent(): RunMetadataUpdater;
    get root(): RunMetadataUpdater;
}
